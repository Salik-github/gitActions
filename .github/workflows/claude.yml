name: ðŸ“ Free Gemini CLI File Processor

on:
  push:
    branches:
      - main
  workflow_dispatch:  
   
jobs:
  process_markdown:
    runs-on: ubuntu-latest
    
    steps:
      - name: 1. Checkout Code
        uses: actions/checkout@v4

      - name: 2. Setup Node.js (Required for CLI)
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: 3. Install Open-Source Gemini CLI
        run: npm install -g @google/gemini-cli

      - name: 4. Process MD File with Free Gemini CLI
        env:
          # Your free-tier API key is securely used here
          GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
        run: |
          # The entire content of your MD file is read and piped as context 
          cat project/prompt.md | gemini generate \
            --model gemini-2.5-flash \
            --prompt "As a documentation expert, review the following Markdown file. Correct any spelling or grammar errors, and ensure all headings are consistent. Output ONLY the corrected Markdown content." \
            --output text > docs/README.md.corrected
          
          echo "--- Corrected File Content ---"
          cat docs/README.md.corrected

     