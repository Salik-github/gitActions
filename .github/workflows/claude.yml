name: Run Claude CLI in GitHub Actions

on:
  workflow_dispatch:

jobs:
  claude-run:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout Repo
        uses: actions/checkout@v4

      - name: Install Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 20

      - name: Install Claude CLI
        run: npm install -g @anthropic-ai/claude-cli

      - name: Add Anthropic API Key
        run: echo "ANTHROPIC_API_KEY=${{ secrets.ANTHROPIC_API_KEY }}" >> $GITHUB_ENV

      - name: Verify Claude CLI
        run: |
          which claude
          claude --version

      - name: Run Claude
        run: claude "Hello from GitHub Actions"
