name: ðŸ“ Free Gemini CLI File Processor

on:
  workflow_dispatch: 
  push:
jobs:
  process_markdown:
    runs-on: ubuntu-latest
    
    steps:
      - name: 1. Checkout Code
        uses: actions/checkout@v4

      - name: 2. Setup Node.js (Required for CLI)
        uses: actions/setup-node@v4
        with:
          node-version: '20'

      - name: 3. Install Open-Source Gemini CLI
        run: npm install -g @google/gemini-cli

      - name: 4. Process MD File with Free Gemini CLI
        env:
          # Your free-tier API key is securely used here
          GEMINI_API_KEY: ${{ secrets.GEMINI_API_KEY }}
        run: |
         echo "Processing file project/prompt.md and outputting to CORRECTED_PROMPT.md..."
          
          # The entire content of your MD file is read and piped as context 
          # The output is now redirected to a file in the existing root directory
          cat project/prompt.md | gemini generate \
            --model gemini-2.5-flash \
            --prompt "As a Testing E2E Agent expert, read the following Markdown file work on the based on the content "run"." \
            --output text > CORRECTED_PROMPT.md
          
          echo "--- Content saved to CORRECTED_PROMPT.md ---"
          cat CORRECTED_PROMPT.md

     